<!-- extend from base layout -->
{% extends "base.html" %}

{% block content %}
	<link href="/static/css/center-txt-btn.css" rel="stylesheet" media="screen">

	<div style="margin-top: 20px">
		<div class="panel panel-primary">
			<div class="panel-heading">
				System Status
			</div>
			<div class="panel-body">
				<div class="inside clearfix">
					<p class="pull-left">
					<span style="float: left; width: 10em; font-weight: bolder;">Voting Status</span><span style="float: left; width: 1em; font-weight: bolder;">:</span> 
					{% if (voteStatus == True) %} 
						Enabled </p>
						<span class="pull-right">
							<a class="btn btn-danger custom-btn" href="/disable">Disable Voting</a>
						</span>
					{% else %} 
						Disabled </p>
						<span class="pull-right">
							<a class="btn btn-success custom-btn" href="/enable">Enable Voting</a>
						</span>
					{% endif %}
				</div>
				<div class="inside clearfix" style="margin-top: 8px">
					<p class="pull-left">
						<form class="form-inline" method="post" action="/updatecamp">
							<label for="campaignName">Campaign Name &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : &nbsp;</label>
							<input type="text" class="form-control" name="campaignName" value="{{ campaign }}" required="1">
						<span class="pull-right">
							 <button type="submit" class="btn btn-success custom-btn">Change</button>
						</span>
						</form>
					</p>
				</div>
			</div>	
		</div>

		<div class="panel panel-primary">
			<div class="panel-heading">
				User Management
			</div>
			<div class="panel-body">
				<table class="table table-striped table-condensed">
					<thead>
						<tr>
							<th>#</th>
							<th>Position</th>
							<th>Name</th>
							<th>Matric Number</th>
							<th>Faculty</th>
							<th>Year</th>
							<th>Semester</th>
							<th>Election Code</th>
							<th>Vote count</th>
							<th>&nbsp;</th>
						</tr>
					</thead>
					<tbody>
						{% for user in users %}
						<tr>
							<th scope="row" class="vert-align">{{ loop.index }}</th>
							<td class="vert-align">{{ user.position }}</td>
							<td class="vert-align">{{ user.name }}</td>
							<td class="vert-align">{{ user.studentId }}</td>
							<td class="vert-align">{{ user.faculty }}</td>
							<td class="vert-align">{{ user.year }}</td>
							<td class="vert-align">{{ user.semester }}</td>
							<td class="vert-align">{{ user.electionCode }}</td>
							<td class="vert-align">{{ user.count }}</td>
							<td class="vert-align">
				
							<form class="form-inline" action="/delcandidate" method="post">
							<div class="form-group">
								<div class="btn-group">

									<button type="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#editUserModal{{ loop.index0 }}"><i class="fa fa-pencil" aria-hidden="true"></i></button>

									<input type="hidden" name="userid" value="{{ user.id }}">
									<button type="submit" class="btn btn-danger btn-sm"><i class="fa fa-minus-circle" aria-hidden="true"></i></button>
								</div>
							</div>			
							</form>
							</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
				<div class="text-center">
					<a class="btn btn-warning custom-btn" data-toggle="modal" data-target="#addUserModal"><i class="fa fa-plus-circle" aria-hidden="true"></i> Add Candidate</a>
				</div>
			</div>
		</div>
	</div>


<!-- Modal -->
<div class="modal fade" id="addUserModal" tabindex="-1" role="dialog" aria-labelledby="addUser">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Add Candidate</h4>
      </div>
      <div class="modal-body">
      	<form class="form-horizontal" action="/addcandidate" method="post">
      		<div class="form-group">
      			<label for="name" class="col-lg-4 control-label">Candidate Name</label>
      			<div class="col-lg-8">
      				<input type="text" class="form-control" id="name" name="name" placeholder="Name" required="1">
      			</div>
    			
      		</div>
      		<div class="form-group">
      			<label for="userid" class="col-lg-4 control-label">Candidate Matric No</label>
      			<div class="col-lg-8">
      				<input type="text" class="form-control" id="userid" name="userid" placeholder="Matric Number" required="1">
      			</div>
    			
      		</div>
      		<div class="form-group">
      			<label for="faculty" class="col-lg-4 control-label">Candidate Faculty</label>
      			<div class="col-lg-8">
      				<select class="form-control" id="faculty" name="faculty">
  					<option value="FTMK">FTMK</option>
					<option value="FKEKK">FKEKK</option>
					<option value="FKP">FKP</option>
					</select>
      			</div>
      		</div>
      		<div class="form-group">
      			<label for="position" class="col-lg-4 control-label">Candidate Position</label>
      			<div class="col-lg-8">
      				<select class="form-control" id="position" name="position">
  					<option value="Pengerusi">Pengerusi</option>
					<option value="Bendahari">Bendahari</option>
					<option value="Setiausaha">Setiausaha</option>
					</select>
      			</div>
      		</div>
      		<div class="form-group">
      			<label for="year" class="col-lg-4 control-label">Candidate Year</label>
      			<div class="col-lg-8">
      				<input type="number" class="form-control" id="year" name="year" placeholder="Candidate Year" required="1">
      			</div>
      		</div>
      		<div class="form-group">
      			<label for="semester" class="col-lg-4 control-label">Candidate Semester</label>
      			<div class="col-lg-8">
      				<input type="number" class="form-control" id="semester" name="semester" placeholder="Candidate Semester" required="1">
      			</div>
      		</div>
      		<div class="form-group">
    			<label for="candidatePicture" class="col-lg-4 control-label">Candidate Photo</label>
    			<div class="col-lg-8">
    				<input type="file" id="candidatePicture">
    				<p class="help-block">Please use suitable sized image.</p>
    			</div>
  			</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Add Candidate</button>
        </form>
      </div>
    </div>
  </div>
</div>



{% for user in users %}
<!-- user edit modal -->
<div class="modal fade" id="editUserModal{{ loop.index0 }}" tabindex="-1" role="dialog" aria-labelledby="editUser">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Edit Candidate</h4>
      </div>
      <div class="modal-body">
      	<form class="form-horizontal" action="/editcandidate" method="post">
      		<div class="form-group">
      			<label for="id" class="col-lg-4 control-label">Candidate ID</label>
      			<div class="col-lg-8">
      				<input type="text" class="form-control" id="id" name="id" required="1" value="{{ users[loop.index0].id }}" readonly>
      			</div>
      		</div>
      		<div class="form-group">
      			<label for="name" class="col-lg-4 control-label">Candidate Name</label>
      			<div class="col-lg-8">
      				<input type="text" class="form-control" id="name" name="name" placeholder="Name" required="1" value="{{ users[loop.index0].name }}">
      			</div>
      		</div>
      		<div class="form-group">
      			<label for="userid" class="col-lg-4 control-label">Candidate Matric No</label>
      			<div class="col-lg-8">
      				<input type="text" class="form-control" id="userid" name="userid" placeholder="Matric Number" required="1" value="{{ users[loop.index0].studentId }}">
      			</div>
    			
      		</div>
      		<div class="form-group">
      			<label for="faculty" class="col-lg-4 control-label">Candidate Faculty</label>
      			<div class="col-lg-8">
      				<select class="form-control" id="faculty" name="faculty">
  					<option value="FTMK" {% if (users[loop.index0].faculty)=='FTMK' %} selected {% endif %}>FTMK</option>
					<option value="FKEKK" {% if (users[loop.index0].faculty)=='FKEKK' %} selected {% endif %}>FKEKK</option>
					<option value="FKP" {% if (users[loop.index0].faculty)=='FKP' %} selected {% endif %}>FKP</option>
					</select>
      			</div>
      		</div>
      		<div class="form-group">
      			<label for="position" class="col-lg-4 control-label">Candidate Position</label>
      			<div class="col-lg-8">
      				<select class="form-control" id="position" name="position">
  					<option value="Pengerusi" {% if (users[loop.index0].position)=='Pengerusi' %} selected {% endif %}>Pengerusi</option>
					<option value="Bendahari" {% if (users[loop.index0].position)=='Bendahari' %} selected {% endif %}>Bendahari</option>
					<option value="Setiausaha" {% if (users[loop.index0].position)=='Setiausaha' %} selected {% endif %}>Setiausaha</option>
					</select>
      			</div>
      		</div>
      		<div class="form-group">
      			<label for="year" class="col-lg-4 control-label">Candidate Year</label>
      			<div class="col-lg-8">
      				<input type="number" class="form-control" id="year" name="year" placeholder="Candidate Year" required="1" value="{{ users[loop.index0].year }}">
      			</div>
      		</div>
      		<div class="form-group">
      			<label for="semester" class="col-lg-4 control-label">Candidate Semester</label>
      			<div class="col-lg-8">
      				<input type="number" class="form-control" id="semester" name="semester" placeholder="Candidate Semester" required="1" value="{{ users[loop.index0].year }}">
      			</div>
      		</div>
      		<div class="form-group">
    			<label for="candidatePicture" class="col-lg-4 control-label">Candidate Photo</label>
    			<div class="col-lg-8">
    				<input type="file" id="candidatePicture">
    				<p class="help-block">Please use suitable sized image.</p>
    			</div>
  			</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Save changes</button>
        </form>
      </div>
    </div>
  </div>
</div>
{% endfor %}

{% endblock %}